<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security5">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="mironcoder" />
    <meta name="email" content="mironcoder@gmail.com" />
    <meta name="profile" content="https://themeforest.net/user/mironcoder" />
    <meta name="template" content="book" />
    <meta name="title" content="book - Ecommerce Book Store HTML Template" />
    <meta name="keywords" content="books, shop, ecommerce, store, html, bootstrap, template" />
    <title>Web bán sách giá rẻ</title>

    <!-- Assets -->
    <link rel="icon" th:href="@{/images/favicon.png}" />
    <link rel="stylesheet" th:href="@{/fonts/flaticon/flaticon.css}" />
    <link rel="stylesheet" th:href="@{/fonts/icofont/icofont.min.css}" />
    <link rel="stylesheet" th:href="@{/fonts/fontawesome/fontawesome.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/venobox/venobox.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/slickslider/slick.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/niceselect/nice-select.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/index.css}" />
</head>
<body>

<!-- Header -->
<header th:replace="~{/web/fragments/header :: header}"></header>

<!-- ===== SLIDER/BANNER ===== -->
<section class="home-index-slider slider-arrow slider-dots">

    <!-- SLIDE 1 -->
    <div class="slide-item">
        <div class="container my-4">
            <div class="row justify-content-center">
                <!-- px-0 để ảnh chạm mép cột, không bị lệch -->
                <div class="col-12 col-xl-10 px-0">
                    <figure class="hero-banner">
                        <img class="hero-banner__img" th:src="@{/images/home1.jpg}" alt="Banner 1">
                    </figure>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 2 -->
    <div class="slide-item">
        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-12 col-xl-10 px-0">
                    <!-- bản nhỏ hơn xíu cho đẹp -->
                    <figure class="hero-banner hero-banner--sm">
                        <img class="hero-banner__img" th:src="@{/images/home2.jpg}" alt="Banner 2">
                    </figure>
                </div>
            </div>
        </div>
    </div>

</section>

<!-- ===== DANH MỤC GỢI Ý ===== -->
<section class="section suggest-part">
    <div class="container">
        <ul class="suggest-slider slider-arrow">
            <!-- item[0]=id, item[1]=name, item[2]=image, item[3]=count -->
            <li th:each="item : ${countProductByCategory}">
                <a class="suggest-card" th:href="@{/productByCategory(id=${item[0]})}">
                    <img th:src="@{/loadImage(imageName=${item[2] != null ? item[2] : 'no-image.png'})}" alt="category"/>
                    <h5>
                        [[${item[1]}]]
                        <span>số lượng : [[${item[3]}]]</span>
                    </h5>
                </a>
            </li>
        </ul>
    </div>
</section>

<!-- ===== SÁCH BÁN CHẠY ===== -->
<section class="section recent-part">
    <div class="container">
        <div class="row"><div class="col-lg-12"><div class="section-heading"><h2>Sách bán chạy</h2></div></div></div>

        <div class="row">
            <div class="col">
                <ul class="new-slider slider-arrow">
                    <li th:each="item : ${bestSaleProduct20}">
                        <div class="product-card" th:with="outOfStock=${item.quantity == null or item.quantity <= 0}">
                            <div class="product-media">
                                <div class="product-label">
                                    <label class="label-text new">bán chạy</label>
                                    <label class="label-text sale" th:if="${item.discount != null and item.discount > 0}">
                                        - [[${item.discount + '%'}]]
                                    </label>
                                    <label class="label-text" th:if="${outOfStock}" style="background:#dc3545">Hết hàng</label>
                                </div>


<!--                                <button class="product-wish wish"><i class="fas fa-heart"></i></button>-->
                                <th:block sec:authorize="isAuthenticated()">
                                    <button class="product-wish" th:if="${!item.favorite}">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                    <button class="product-wish" th:if="${item.favorite}" style="color:#fd7e14">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </th:block>
                                <th:block sec:authorize="isAnonymous()">
                                    <button class="product-wish"><i class="fas fa-heart"></i></button>
                                </th:block>


                                <a class="product-image" th:href="@{/productDetail(id=${item.productId})}">
                                    <img th:src="@{'/loadImage?imageName=' + ${item.productImage}}" alt="product" />
                                </a>
                                <div class="product-widget">

                                    <th:block sec:authorize="isAnonymous()">
                                        <a title="Hãy đăng nhập" th:href="@{/login}" class="fas fa-heart"></a>
                                    </th:block>
                                    <th:block sec:authorize="isAuthenticated()">
                                        <a th:if="${!item.favorite}" title="Yêu thích"
                                           th:href="@{/doFavorite(id=${item.productId}, redirect = '/')}" class="fas fa-heart"></a>
                                        <a th:if="${item.favorite}" title="Xóa Yêu thích"
                                           th:href="@{/doUnFavorite(id=${item.productId}, redirect = '/')}"
                                           style="background-color:#fd7e14" class="fas fa-heart"></a>
                                    </th:block>

                                    <a title="Video sản phẩm" href="https://youtu.be/9xzcVxSBbG8" class="venobox fas fa-play" data-autoplay="true" data-vbtype="video"></a>
                                    <a title="Chi tiết sản phẩm" th:href="@{/productDetail(id=${item.productId})}" class="fas fa-eye"></a>
                                </div>
                            </div>
                            <div class="product-content">
                                <div class="product-rating">
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="icofont-star"></i>
                                </div>
                                <h6 class="product-name">
                                    <a th:href="@{/productDetail(id=${item.productId})}">[[${item.productName}]]</a>
                                </h6>
                                <h6 class="product-price">
                                    <del>[[${#numbers.formatDecimal(item.price, 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]</del>
                                    <span>
                                      [[${#numbers.formatDecimal(item.price - (item.price * item.discount / 100), 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]]
                                    </span>
                                </h6>
                                <a class="product-add1" title="Thêm giỏ hàng" th:if="${!outOfStock}" th:href="@{/addToCart(productId=${item.productId})}">
                                    <i class="fas fa-shopping-basket"></i><span>Thêm giỏ hàng</span>
                                </a>
                                <span class="product-add1" th:if="${outOfStock}" style="pointer-events:none;opacity:.75;background:#6c757d;border-color:#6c757d;cursor:not-allowed;">
                                    <i class="fas fa-box-open"></i><span>Hết hàng</span>
                                </span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row"><div class="col-lg-12"><div class="section-btn-25">
            <a th:href="@{/products}" class="btn btn-outline"><i class="fas fa-eye"></i><span>xem thêm</span></a>
        </div></div></div>
    </div>
</section>

<!-- ===== PROMO ===== -->
<div class="section promo-part">
    <div class="container">
        <div class="row"><div class="col-lg-12">
            <div class="promo-img">
                <a href="javascript:void(0);"><img th:src="@{/images/promo/home/1.png}" alt="promo" /></a>
            </div>
        </div></div>
    </div>
</div>

<!-- ===== SÁCH NỔI BẬT ===== -->
<section class="section feature-part">
    <div class="container">
        <div class="row"><div class="col-lg-12"><div class="section-heading"><h2>Sách nổi bật</h2></div></div></div>

        <div class="row">
            <div class="col">
                <ul class="new-slider slider-arrow">
                    <li th:each="item : ${featuredProducts}">
                        <div class="product-card" th:with="outOfStock=${item.quantity == null or item.quantity <= 0}">
                            <div class="product-media">
                                <div class="product-label">
                                    <label class="label-text feat">nổi bật</label>
                                    <label class="label-text sale" th:if="${item.discount != null and item.discount > 0}">
                                        - [[${item.discount + '%'}]]
                                    </label>
                                    <label class="label-text" th:if="${outOfStock}" style="background:#dc3545">Hết hàng</label>
                                </div>
<!--                                <button class="product-wish wish"><i class="fas fa-heart"></i></button>-->

                                <th:block sec:authorize="isAuthenticated()">
                                    <button class="product-wish" th:if="${!item.favorite}">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                    <button class="product-wish" th:if="${item.favorite}" style="color:#fd7e14">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </th:block>
                                <th:block sec:authorize="isAnonymous()">
                                    <button class="product-wish"><i class="fas fa-heart"></i></button>
                                </th:block>

                                <a class="product-image" th:href="@{/productDetail(id=${item.productId})}">
                                    <img th:src="@{'/loadImage?imageName=' + ${item.productImage}}" alt="product" />
                                </a>
                                <div class="product-widget">

                                    <th:block sec:authorize="isAnonymous()">
                                        <a title="Hãy đăng nhập" th:href="@{/login}" class="fas fa-heart"></a>
                                    </th:block>
                                    <th:block sec:authorize="isAuthenticated()">
                                        <a th:if="${!item.favorite}" title="Yêu thích"
                                           th:href="@{/doFavorite(id=${item.productId}, redirect = '/')}" class="fas fa-heart"></a>
                                        <a th:if="${item.favorite}" title="Xóa Yêu thích"
                                           th:href="@{/doUnFavorite(id=${item.productId}, redirect = '/')}"
                                           style="background-color:#fd7e14" class="fas fa-heart"></a>
                                    </th:block>

                                    <a title="Product Video" href="https://youtu.be/9xzcVxSBbG8" class="venobox fas fa-play" data-autoplay="true" data-vbtype="video"></a>
                                    <a title="Chi tiết sản phẩm" th:href="@{/productDetail(id=${item.productId})}" class="fas fa-eye"></a>
                                </div>
                            </div>
                            <div class="product-content">
                                <div class="product-rating">
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="icofont-star"></i>
                                </div>
                                <h6 class="product-name">
                                    <a th:href="@{/productDetail(id=${item.productId})}">[[${item.productName}]]</a>
                                </h6>
                                <h6 class="product-price">
                                    <del>[[${#numbers.formatDecimal(item.price, 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]</del>
                                    <span>
                                      [[${#numbers.formatDecimal(item.price - (item.price * item.discount / 100), 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]]
                                    </span>
                                </h6>
                                <a class="product-add1" title="Thêm giỏ hàng" th:if="${!outOfStock}" th:href="@{/addToCart(productId=${item.productId})}">
                                    <i class="fas fa-shopping-basket"></i><span>Thêm giỏ hàng</span>
                                </a>
                                <span class="product-add1" th:if="${outOfStock}" style="pointer-events:none;opacity:.75;background:#6c757d;border-color:#6c757d;cursor:not-allowed;">
                                    <i class="fas fa-box-open"></i><span>Hết hàng</span>
                                </span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row"><div class="col-lg-12"><div class="section-btn-25">
            <a th:href="@{/products}" class="btn btn-outline"><i class="fas fa-eye"></i><span>xem thêm</span></a>
        </div></div></div>
    </div>
</section>

<!-- ===== COUNTDOWN / CTA ===== -->
<section class="section countdown-part">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mx-auto">
                <div class="countdown-content">
                    <h3>ƯU ĐÃI GIẢM GIÁ ĐẶC BIỆT CHO CÁC LOẠI SÁCH</h3>
                    <p>Reprehenderit sed quod autem molestiae aut modi minus veritatis iste dolorum suscipit quis.</p>
                    <div class="countdown countdown-clock" data-countdown="2025/12/22">
                        <span class="countdown-time"><span>00</span><small>days</small></span>
                        <span class="countdown-time"><span>00</span><small>hours</small></span>
                        <span class="countdown-time"><span>00</span><small>minutes</small></span>
                        <span class="countdown-time"><span>00</span><small>seconds</small></span>
                    </div>
                    <a th:href="@{/products}" class="btn btn-inline"><i class="fas fa-shopping-basket"></i><span>Mua sắm ngay bây giờ</span></a>
                </div>
            </div>
            <div class="col-lg-1"></div>
            <div class="col-lg-5">
                <div class="countdown-img">
                    <img th:src="@{/images/countdown1.jpg}" alt="countdown" />
                    <div class="countdown-off"><span>20%</span><span>off</span></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ===== MẶT HÀNG MỚI VỀ ===== -->
<section class="section newitem-part">
    <div class="container">
        <div class="row"><div class="col"><div class="section-heading"><h2>Mặt hàng mới về</h2></div></div></div>

        <div class="row">
            <div class="col">
                <ul class="new-slider slider-arrow">
                    <li th:each="item : ${productList}">
                        <div class="product-card" th:with="outOfStock=${item.quantity == null or item.quantity <= 0}">
                            <div class="product-media">
                                <div class="product-label">
                                    <label class="label-text new">mới</label>
                                    <label class="label-text sale" th:if="${item.discount != null and item.discount > 0}">
                                        - [[${item.discount + '%'}]]
                                    </label>
                                    <label class="label-text" th:if="${outOfStock}" style="background:#dc3545">Hết hàng</label>
                                </div>
<!--                                <button class="product-wish wish"><i class="fas fa-heart"></i></button>-->

                                <th:block sec:authorize="isAuthenticated()">
                                    <button class="product-wish" th:if="${!item.favorite}">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                    <button class="product-wish" th:if="${item.favorite}" style="color:#fd7e14">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </th:block>
                                <th:block sec:authorize="isAnonymous()">
                                    <button class="product-wish"><i class="fas fa-heart"></i></button>
                                </th:block>

                                <a class="product-image" th:href="@{/productDetail(id=${item.productId})}">
                                    <img th:src="@{'/loadImage?imageName=' + ${item.productImage}}" alt="product" />
                                </a>
                                <div class="product-widget">

                                    <th:block sec:authorize="isAnonymous()">
                                        <a title="Hãy đăng nhập" th:href="@{/login}" class="fas fa-heart"></a>
                                    </th:block>
                                    <th:block sec:authorize="isAuthenticated()">
                                        <a th:if="${!item.favorite}" title="Yêu thích"
                                           th:href="@{/doFavorite(id=${item.productId}, redirect = '/')}" class="fas fa-heart"></a>
                                        <a th:if="${item.favorite}" title="Xóa Yêu thích"
                                           th:href="@{/doUnFavorite(id=${item.productId}, redirect = '/')}"
                                           style="background-color:#fd7e14" class="fas fa-heart"></a>
                                    </th:block>

                                    <a title="Product Video" href="https://youtu.be/9xzcVxSBbG8" class="venobox fas fa-play" data-autoplay="true" data-vbtype="video"></a>
                                    <a title="Chi tiết sản phẩm" th:href="@{/productDetail(id=${item.productId})}" class="fas fa-eye"></a>
                                </div>
                            </div>
                            <div class="product-content">
                                <div class="product-rating">
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="active icofont-star"></i><i class="active icofont-star"></i>
                                    <i class="icofont-star"></i>
                                </div>
                                <h6 class="product-name">
                                    <a th:href="@{/productDetail(id=${item.productId})}">[[${item.productName}]]</a>
                                </h6>
                                <h6 class="product-price">
                                    <del>[[${#numbers.formatDecimal(item.price, 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]</del>
                                    <span>
                                      [[${#numbers.formatDecimal(item.price - (item.price * item.discount / 100), 1, 'DEFAULT', 0, 'DEFAULT')} + ' đ']]]
                                    </span>
                                </h6>
                                <a class="product-add1" title="Thêm giỏ hàng" th:if="${!outOfStock}" th:href="@{/addToCart(productId=${item.productId})}">
                                    <i class="fas fa-shopping-basket"></i><span>Thêm giỏ hàng</span>
                                </a>
                                <span class="product-add1" th:if="${outOfStock}" style="pointer-events:none;opacity:.75;background:#6c757d;border-color:#6c757d;cursor:not-allowed;">
                                    <i class="fas fa-box-open"></i><span>Hết hàng</span>
                                </span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row"><div class="col">
            <div class="section-btn-25">
                <a th:href="@{/products}" class="btn btn-outline"><i class="fas fa-eye"></i><span>xem thêm</span></a>
            </div>
        </div></div>
    </div>
</section>

<!-- ===== PROMO 2 ===== -->
<div class="section promo-part">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 px-xl-3">
                <div class="promo-img">
                    <a href="javascript:void(0);"><img th:src="@{/images/home2.jpg}" alt="promo" /></a>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 px-xl-3">
                <div class="promo-img">
                    <a href="javascript:void(0);"><img th:src="@{/images/promo/home/116.jpg}" alt="promo" /></a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ===== TESTIMONIAL ===== -->
<section class="section testimonial-part">
    <div class="container">
        <div class="row"><div class="col-12"><div class="section-heading"><h2>phản hồi của khách hàng</h2></div></div></div>
        <div class="row">
            <div class="col-lg-12">
                <div class="testimonial-slider slider-arrow">
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>Lorem ipsum dolor consectetur adipisicing elit neque earum sapiente vitae obcaecati magnam doloribus magni provident ipsam</p>
                        <h5>mahmud hasan</h5>
                        <ul><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li></ul>
                        <img th:src="@{/images/avatar/01.jpg}" alt="testimonial" />
                    </div>
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>Lorem ipsum dolor consectetur adipisicing elit neque earum sapiente vitae obcaecati magnam doloribus magni provident ipsam</p>
                        <h5>mahmud hasan</h5>
                        <ul><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li></ul>
                        <img th:src="@{/images/avatar/02.jpg}" alt="testimonial" />
                    </div>
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>Lorem ipsum dolor consectetur adipisicing elit neque earum sapiente vitae obcaecati magnam doloribus magni provident ipsam</p>
                        <h5>mahmud hasan</h5>
                        <ul><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li></ul>
                        <img th:src="@{/images/avatar/03.jpg}" alt="testimonial" />
                    </div>
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>Lorem ipsum dolor consectetur adipisicing elit neque earum sapiente vitae obcaecati magnam doloribus magni provident ipsam</p>
                        <h5>mahmud hasan</h5>
                        <ul><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li><li class="fas fa-star"></li></ul>
                        <img th:src="@{/images/avatar/04.jpg}" alt="testimonial" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ===== NEWSLETTER ===== -->
<section class="news-part" th:style="|background: url(@{/images/newsletter.jpg}) no-repeat center|">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-5 col-lg-6 col-xl-7">
                <div class="news-text">
                    <h2>Nhận Chiết Khấu 20% Cho Người Đăng Ký</h2>
                    <p>Nhận Chiết Khấu 20% Cho Người Đăng Ký</p>
                </div>
            </div>
            <div class="col-md-7 col-lg-6 col-xl-5">
                <form class="news-form">
                    <input type="text" placeholder="Nhập Địa Chỉ Email Của Bạn" />
                    <button><span><i class="icofont-ui-email"></i>Gửi</span></button>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer th:replace="~{/web/fragments/footer :: footer}"></footer>

<!-- JS -->
<script th:src="@{/vendor/bootstrap/jquery-1.12.4.min.js}"></script>
<script th:src="@{/vendor/bootstrap/popper.min.js}"></script>
<script th:src="@{/vendor/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/vendor/countdown/countdown.min.js}"></script>
<script th:src="@{/vendor/niceselect/nice-select.min.js}"></script>
<script th:src="@{/vendor/slickslider/slick.min.js}"></script>
<script th:src="@{/vendor/venobox/venobox.min.js}"></script>
<script th:src="@{/js/nice-select.js}"></script>
<script th:src="@{/js/countdown.js}"></script>
<script th:src="@{/js/accordion.js}"></script>
<script th:src="@{/js/venobox.js}"></script>
<script th:src="@{/js/slick.js}"></script>
<script th:src="@{/js/main.js}"></script>
</body>
</html>
