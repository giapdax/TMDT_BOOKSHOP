<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="author" content="mironcoder" />
    <meta name="email" content="mironcoder@gmail.com" />
    <meta name="profile" content="https://themeforest.net/user/mironcoder" />
    <meta name="template" content="book" />
    <meta name="title" content="book - Ecommerce Book Store HTML Template" />
    <meta name="keywords" content="organic, food, shop, ecommerce, store, html, bootstrap, template, agriculture, vegetables, products, farm, grocery, natural, online"/>
    <title>Web bán sách giá rẻ</title>
    <link rel="icon" href="images/favicon.png" />
    <link rel="stylesheet" href="fonts/flaticon/flaticon.css" />
    <link rel="stylesheet" href="fonts/icofont/icofont.min.css" />
    <link rel="stylesheet" href="fonts/fontawesome/fontawesome.min.css" />
    <link rel="stylesheet" href="vendor/venobox/venobox.min.css" />
    <link rel="stylesheet" href="vendor/slickslider/slick.min.css" />
    <link rel="stylesheet" href="vendor/niceselect/nice-select.min.css" />
    <link rel="stylesheet" href="vendor/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/user-auth.css" />
</head>
<body>
<section class="user-form-part">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-sm-10 col-md-12 col-lg-12 col-xl-10">
                <div class="user-form-logo">
                    <a th:href="@{/}"><img src="images/logo.png" alt="logo" /></a>
                </div>
                <div class="user-form-card">
                    <div class="user-form-title">
                        <h2>Đăng Ký Ngay!</h2>
                        <p>Thiết Lập Một Tài Khoản Mới</p>
                    </div>
                    <div class="user-form-group">
                        <ul class="user-form-social">
                            <li>
                                <a class="facebook" href="javascript:void(0);">
                                    <i class="fab fa-facebook-f"></i>Join with facebook
                                </a>
                            </li>
                            <li>
                                <a class="google" href="javascript:void(0);">
                                    <i class="fab fa-google"></i>Join with google
                                </a>
                            </li>
                        </ul>
                        <div class="user-form-divider"><p>hoặc</p></div>

                        <form th:action="@{/register}" method="post" th:object="${user}" class="user-form">

                            <!-- Email -->
                            <div class="form-group">
                                <input
                                        type="email"
                                        th:field="*{email}"
                                        id="email"
                                        class="form-control"
                                        placeholder="Địa chỉ Email"
                                        autocomplete="off"
                                        required="required"
                                        pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$"
                                        title="Email không hợp lệ. Ví dụ: ten@gmail.com"
                                />
                                <small th:if="${error}" th:text="${error}" class="text-danger"></small>
                            </div>

                            <!-- Username -->
                            <div class="form-group">
                                <input
                                        type="text"
                                        th:field="*{username}"
                                        id="username"
                                        class="form-control"
                                        placeholder="Username (chỉ chữ & số, 4–50 ký tự)"
                                        autocomplete="username"
                                        required="required"
                                        minlength="4"
                                        maxlength="50"
                                        pattern="^[A-Za-z0-9]{4,50}$"
                                        title="Username 4–50 ký tự, chỉ chữ và số, không khoảng trắng/ký tự đặc biệt"
                                />
                            </div>

                            <!-- Họ tên -->
                            <div class="form-group">
                                <input
                                        type="text"
                                        th:field="*{name}"
                                        id="name"
                                        class="form-control"
                                        placeholder="Họ và tên"
                                        autocomplete="off"
                                        required="required"
                                        minlength="2"
                                        maxlength="50"
                                        pattern="^[A-Za-zÀ-ỹĐđ ]{2,50}$"
                                        title="Tên chỉ chứa chữ cái (có dấu) và khoảng trắng, 2-50 ký tự"
                                />
                            </div>

                            <!-- SĐT Việt Nam -->
                            <div class="form-group">
                                <input
                                        type="tel"
                                        th:field="*{phone}"
                                        id="phone"
                                        class="form-control"
                                        placeholder="Số điện thoại (VD: 090xxxxxxx hoặc +843xxxxxxx)"
                                        autocomplete="tel"
                                        required="required"
                                        pattern="^(0|\+84)(3|5|7|8|9)\d{8}$"
                                        title="Nhập số di động Việt Nam: 0(3|5|7|8|9) + 8 số, hoặc +84(3|5|7|8|9) + 8 số"
                                />
                            </div>

                            <!-- Mật khẩu -->
                            <div class="form-group">
                                <input
                                        type="password"
                                        th:field="*{password}"
                                        class="form-control"
                                        id="myPass"
                                        name="password"
                                        placeholder="Mật khẩu"
                                        required="required"
                                        minlength="12"
                                        maxlength="128"
                                        autocomplete="new-password"
                                        pattern="(?=.*[A-Za-z])(?=.*\d)(?=.*[^A-Za-z0-9])\S{12,128}"
                                        title="Tối thiểu 12 ký tự, phải có chữ cái, số và ký tự đặc biệt, không có khoảng trắng"
                                />
                            </div>

                            <!-- Nhập lại mật khẩu (mới) -->
                            <div class="form-group">
                                <input
                                        type="password"
                                        th:field="*{confirmPassword}"
                                        class="form-control"
                                        id="confirmPass"
                                        name="confirmPassword"
                                        placeholder="Nhập lại mật khẩu"
                                        required="required"
                                        minlength="12"
                                        maxlength="128"
                                        autocomplete="new-password"
                                />
                                <small id="confirmHelp" class="text-danger" style="display:none;">Mật khẩu không khớp</small>
                            </div>

                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="check" onclick="togglePass()"/>
                                <label class="form-check-label" for="check">Hiển thị mật khẩu</label>
                            </div>

                            <div class="form-button">
                                <button type="submit">Đăng Ký</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="user-form-remind">
                    <p>Bạn đã có tài khoản?<a th:href="@{/login}">Đăng nhập tại đây</a></p>
                </div>
                <div class="user-form-footer">
                    <p>BOOK-SHOP | &COPY; Developer by <a href="javascript:void(0);">CT07</a></p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    function togglePass() {
        var p1 = document.getElementById("myPass");
        var p2 = document.getElementById("confirmPass");
        if (p1) p1.type = (p1.type === "password") ? "text" : "password";
        if (p2) p2.type = (p2.type === "password") ? "text" : "password";
    }

    // Check khớp mật khẩu (client-side)
    (function(){
        var p = document.getElementById("myPass");
        var c = document.getElementById("confirmPass");
        var hint = document.getElementById("confirmHelp");
        if(!p || !c) return;
        function check(){
            if (c.value && p.value !== c.value) {
                c.setCustomValidity("Mismatch");
                if (hint) hint.style.display = "inline";
            } else {
                c.setCustomValidity("");
                if (hint) hint.style.display = "none";
            }
        }
        p.addEventListener("input", check);
        c.addEventListener("input", check);
    })();
</script>

<script src="vendor/bootstrap/jquery-1.12.4.min.js"></script>
<script src="vendor/bootstrap/popper.min.js"></script>
<script src="vendor/bootstrap/bootstrap.min.js"></script>
<script src="vendor/countdown/countdown.min.js"></script>
<script src="vendor/niceselect/nice-select.min.js"></script>
<script src="vendor/slickslider/slick.min.js"></script>
<script src="vendor/venobox/venobox.min.js"></script>
<script src="js/nice-select.js"></script>
<script src="js/countdown.js"></script>
<script src="js/accordion.js"></script>
<script src="js/venobox.js"></script>
<script src="js/slick.js"></script>
<script src="js/main.js"></script>
</body>
</html>
