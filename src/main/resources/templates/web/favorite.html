<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security5">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="author" content="mironcoder"/>
    <meta name="email" content="mironcoder@gmail.com"/>
    <meta name="profile" content="https://themeforest.net/user/mironcoder"/>
    <meta name="template" content="book"/>
    <meta name="title" content="book - Ecommerce Book Store HTML Template"/>
    <meta name="keywords" content="organic, food, shop, ecommerce, store, html, bootstrap, template, agriculture, vegetables, products, farm, grocery, natural, online"/>
    <title>Danh sách yêu thích</title>

    <link rel="icon" th:href="@{/images/favicon.png}" />
    <link rel="stylesheet" th:href="@{/fonts/flaticon/flaticon.css}" />
    <link rel="stylesheet" th:href="@{/fonts/icofont/icofont.min.css}" />
    <link rel="stylesheet" th:href="@{/fonts/fontawesome/fontawesome.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/venobox/venobox.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/slickslider/slick.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/niceselect/nice-select.min.css}" />
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/wishlist.css}" />
</head>
<body>
<header th:replace="~{/web/fragments/header :: header}"></header>

<section class="inner-section single-banner"
         th:style="|background: url(@{/images/single-banner.jpg}) no-repeat center|">
    <div class="container">
        <h2>Danh sách yêu thích</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>
        </ol>
    </div>
</section>

<section class="inner-section wishlist-part">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="table-scroll">

                    <div th:unless="${totalSave!=0}" class="text-center">
                        <h3 style="color: #119744" class="mt-5">Hiện tại bạn chưa có sản phẩm yêu thích nào!</h3>
                        <h4 style="color: #119744">Hãy mua sắm đi nào!</h4>
                        <a th:href="@{/products}" style="text-decoration: underline;">Click tại đây!</a>
                    </div>

                    <table class="table-list" th:if="${totalSave!=0}">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Sản phẩm</th>
                            <th scope="col">Tên</th>
                            <th scope="col">Đơn giá</th>
                            <th scope="col">Trạng thái</th>
                            <th scope="col">Thêm giỏ hàng</th>
                            <th scope="col">Hành động</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="item,iState : ${favorites}"
                            th:with="outOfStock=${item.product.quantity == null or item.product.quantity <= 0},
                                     finalPrice=${item.product.price - (item.product.price * item.product.discount/100)}">
                            <td class="table-serial"><h6>[[${iState.index + 1}]]</h6></td>

                            <td class="table-image">
                                <img th:src="@{'/loadImage?imageName='+${item.product.productImage}}" alt="product"/>
                            </td>

                            <td class="table-name">
                                <h6>[[${item.product.productName}]]</h6>
                            </td>

                            <td class="table-price">
                                <h6>
                                    [[${#numbers.formatDecimal(finalPrice, 1, 'DEFAULT', 0, 'DEFAULT')}+' đ']]
                                    <small>/kg</small>
                                </h6>
                            </td>

                            <td class="table-status">
                                <h6 th:classappend="${outOfStock} ? 'stock-out' : 'stock-in'"
                                    th:text="${outOfStock} ? 'Đã hết hàng' : 'Sản phẩm đang còn'">
                                    Sản phẩm đang còn
                                </h6>
                            </td>

                            <td class="table-shop">
                                <!-- Y hệt shop.html: còn hàng -> nút active; hết hàng -> disabled -->
                                <a class="product-add1" title="Thêm giỏ hàng"
                                   th:if="${!outOfStock}"
                                   th:href="@{/addToCart(productId=${item.product.productId})}">
                                    Thêm giỏ hàng
                                </a>

                                <span th:if="${outOfStock}"
                                      class="product-add1"
                                      style="pointer-events:none; opacity:.75; background:#6c757d; border-color:#6c757d; cursor:not-allowed;">
                                  Hết hàng
                                </span>
                            </td>

                            <td class="table-action">
                                <a class="view"
                                   th:href="@{/productDetail(id=${item.product.productId})}"
                                   title="Chi tiết sản phẩm">
                                    <i class="fas fa-eye"></i>
                                </a>

                                <a class="trash"
                                   th:href="@{/doUnFavorite(id=${item.product.productId})}"
                                   title="Xóa yêu thích">
                                    <i class="icofont-trash"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>
</section>

<section class="news-part"
         th:style="|background: url(@{/images/newsletter.jpg}) no-repeat center|">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-5 col-lg-6 col-xl-7">
                <div class="news-text">
                    <h2>Nhận Chiết Khấu 20% Cho Người Đăng Ký</h2>
                    <p>Nhận Chiết Khấu 20% Cho Người Đăng Ký</p>
                </div>
            </div>
            <div class="col-md-7 col-lg-6 col-xl-5">
                <form class="news-form">
                    <input type="text" placeholder="Nhập Địa Chỉ Email Của Bạn"/>
                    <button><span><i class="icofont-ui-email"></i>Gửi</span></button>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="intro-part">
    <div class="container">
        <div class="row intro-content">
            <div class="col-sm-6 col-lg-3">
                <div class="intro-wrap">
                    <div class="intro-icon"><i class="fas fa-truck"></i></div>
                    <div class="intro-content">
                        <h5>Giao Hàng Tận Nhà Miễn Phí</h5>
                        <p>Lorem ipsum dolor sit amet adipisicing elit nobis.</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="intro-wrap">
                    <div class="intro-icon"><i class="fas fa-sync-alt"></i></div>
                    <div class="intro-content">
                        <h5>Chính Sách Hoàn Trả</h5>
                        <p>Lorem ipsum dolor sit amet adipisicing elit nobis.</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="intro-wrap">
                    <div class="intro-icon"><i class="fas fa-headset"></i></div>
                    <div class="intro-content">
                        <h5>Hệ Thống Hỗ Trợ</h5>
                        <p>Lorem ipsum dolor sit amet adipisicing elit nobis.</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-lg-3">
                <div class="intro-wrap">
                    <div class="intro-icon"><i class="fas fa-lock"></i></div>
                    <div class="intro-content">
                        <h5>Cách Thanh Toán An Toàn</h5>
                        <p>Lorem ipsum dolor sit amet adipisicing elit nobis.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<footer th:replace="~{/web/fragments/footer :: footer}"></footer>

<script th:src="@{/vendor/bootstrap/jquery-1.12.4.min.js}"></script>
<script th:src="@{/vendor/bootstrap/popper.min.js}"></script>
<script th:src="@{/vendor/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/vendor/countdown/countdown.min.js}"></script>
<script th:src="@{/vendor/niceselect/nice-select.min.js}"></script>
<script th:src="@{/vendor/slickslider/slick.min.js}"></script>
<script th:src="@{/vendor/venobox/venobox.min.js}"></script>
<script th:src="@{/js/nice-select.js}"></script>
<script th:src="@{/js/countdown.js}"></script>
<script th:src="@{/js/accordion.js}"></script>
<script th:src="@{/js/venobox.js}"></script>
<script th:src="@{/js/slick.js}"></script>
<script th:src="@{/js/main.js}"></script>
</body>
</html>
